# Отчёт по лабораторной работе  
**Тема:** Разработка расширения для IDE (плагина)  
**Проект:** Расширение VS Code «todo-highlighter»  
**Автор:** Мясникова Софья Кирилловна, М3106  

## Техническое задание (ТЗ)

Разработать расширение VS Code для подсветки специальных комментариев.

**Функциональные требования:**

- Расширение должно автоматически находить в тексте активного документа строки:
  - `// TODO ...`
  - `// FIXME ...`
  - `// HACK ...`
- Каждый тип комментариев должен иметь собственный цвет подсветки.
- Подсветка должна обновляться:
  - при изменении текста документа;
  - при переключении активной вкладки.
- Должна быть доступна команда **«TODO Highlighter: Hello World»** в Command Palette.

## Краткое описание архитектуры IDE и подключения расширений

Visual Studio Code имеет модульную архитектуру с разделением на:

1. **Основной процесс**  
   Отвечает за интерфейс редактора, отображение вкладок, панелей, кода и т.п.  
   Код расширений здесь не выполняется.

2. **Extension Host**  
   Отдельный процесс, в котором выполняются все установленные расширения (плагины).  
   Обеспечивает изоляцию стороннего кода от основного интерфейса и повышает стабильность IDE.

3. **VS Code Extension API**  
   Набор функций, через которые необходимые возможности IDE доступны расширениям:
   - работа с текстом документа;
   - реакция на события;
   - регистрация команд;
   - создание подсветки и декораций;
   - добавление панелей и элементов интерфейса.

4. **`package.json`**  
   Содержит:
   - имя и версию расширения;
   - точку входа (`main`);
   - события активации (`activationEvents`);
   - список команд (`contributes.commands`);
   - требования к версии VS Code.

**Жизненный цикл плагина:**

- При запуске редактор считывает `package.json` всех расширений.
- При выполнении условий активации вызывается функция `activate(context)`.
- При закрытии/выгрузке расширения вызывается `deactivate()`.

---

## 5. Краткое описание работы

1. **Создание проекта расширения**  
   - С помощью генератора `yo code` был создан шаблон расширения VS Code.
   - В файле `package.json` настроены:
     - точка входа (`"main": "./extension.js"`),
     - событие активации (`"activationEvents": ["*"]`),
     - команда `todo-highlighter.helloWorld` в `contributes.commands`.

2. **Реализация логики в `extension.js`**  
   - Описан объект `COMMENT_TYPES` с тремя типами комментариев: TODO, FIXME, HACK (регулярное выражение + цвет).
   - В функции `activate(context)`:
     - зарегистрирована команда `todo-highlighter.helloWorld`, показывающая информационное сообщение;
     - созданы объекты `TextEditorDecorationType` для каждого типа комментариев;
     - объявлена функция `updateDecorations()`, выполняющая поиск и подсветку комментариев;
     - добавлены обработчики:
       - `window.onDidChangeActiveTextEditor` (переключение вкладок);
       - `workspace.onDidChangeTextDocument` (изменение текста).
     - выполнен первичный вызов `updateDecorations()`.

   - В функции `updateDecorations()`:
     - получен активный редактор;
     - считан текст документа;
     - для каждого типа комментариев выполнен поиск по регулярному выражению;
     - вычислены диапазоны (объекты `Range`);
     - применена подсветка через `editor.setDecorations()`.

3. **Документирование и отчётность**
   - В `extension.js` добавлены JSDoc-комментарии к основным функциям и структурам.
   - Подготовлены файлы:
     - `README.md` — краткое описание для пользователя;
     - `DOCUMENTATION.md` — техническая документация проекта;
     - `REPORT.md` — отчёт о лабораторной работе.

4. **Размещение на GitHub**
   - В корне проекта инициализирован репозиторий Git.
   - Исходный код и документация загружены в удалённый репозиторий GitHub.

---

## 6. Тестирование

Тестирование выполнялось в режиме разработки расширений VS Code:

1. Запуск через `F5` (Run Extension), открытие окна **Extension Development Host**.
2. Создание тестового файла `test.cpp`.
